{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yoda/Downloads/Sistema%20de%20Gest%C3%A3o%20Socioemocional/app/%28auth%29/login/actions.ts"],"sourcesContent":["'use server';\r\n\r\nimport { createClient } from '@/lib/supabase/server';\r\nimport { redirect } from 'next/navigation';\r\n\r\nexport async function login(formData: FormData) {\r\n    const supabase = await createClient();\r\n    const email = formData.get('email') as string;\r\n    const password = formData.get('password') as string;\r\n\r\n    if (!email || !password) {\r\n        return { error: 'Preencha todos os campos.' };\r\n    }\r\n\r\n    const { error } = await supabase.auth.signInWithPassword({\r\n        email,\r\n        password,\r\n    });\r\n\r\n    if (error) {\r\n        console.error('Login error:', error.message);\r\n        return { error: 'Email ou senha incorretos.' };\r\n    }\r\n\r\n    // O middleware cuidará do redirecionamento para o '/' e o app/(portal)/page.tsx \r\n    // cuidará do redirect baseado no Role.\r\n    redirect('/');\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAKsB,wBAAA,WAAA,GAAA,IAAA,sSAAA,EAAA,8CAAA,2RAAA,EAAA,KAAA,GAAA,iSAAA,EAAA,yCAAA"}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yoda/Downloads/Sistema%20de%20Gest%C3%A3o%20Socioemocional/app/%28auth%29/login/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { login } from './actions';\r\nimport { Loader2 } from 'lucide-react';\r\nimport Link from 'next/link';\r\n\r\nexport default function LoginPage() {\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [pending, setPending] = useState(false);\r\n\r\n    async function handleSubmit(formData: FormData) {\r\n        setPending(true);\r\n        setError(null);\r\n        const result = await login(formData);\r\n        if (result?.error) {\r\n            setError(result.error);\r\n            setPending(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"rounded-xl border bg-white shadow-sm overflow-hidden\">\r\n            <div className=\"p-6 sm:p-8\">\r\n                <div className=\"mb-8 text-center text-indigo-600\">\r\n                    <div className=\"inline-flex h-12 w-12 items-center justify-center rounded-full bg-indigo-50 mb-4\">\r\n                        <svg\r\n                            className=\"h-6 w-6\"\r\n                            fill=\"none\"\r\n                            stroke=\"currentColor\"\r\n                            viewBox=\"0 0 24 24\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                        >\r\n                            <path\r\n                                strokeLinecap=\"round\"\r\n                                strokeLinejoin=\"round\"\r\n                                strokeWidth={2}\r\n                                d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"\r\n                            />\r\n                        </svg>\r\n                    </div>\r\n                    <h1 className=\"text-2xl font-bold text-slate-900\">Gestão Socioemocional</h1>\r\n                    <p className=\"text-sm text-slate-500 mt-1\">Bem-vindo(a) ao portal de inteligência</p>\r\n                </div>\r\n\r\n                <form action={handleSubmit} className=\"space-y-4\">\r\n                    <div>\r\n                        <label\r\n                            htmlFor=\"email\"\r\n                            className=\"block text-sm font-medium text-slate-700 mb-1\"\r\n                        >\r\n                            Email institucional\r\n                        </label>\r\n                        <input\r\n                            id=\"email\"\r\n                            name=\"email\"\r\n                            type=\"email\"\r\n                            placeholder=\"exemplo@escola.com.br\"\r\n                            required\r\n                            className=\"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <div className=\"flex items-center justify-between mb-1\">\r\n                            <label\r\n                                htmlFor=\"password\"\r\n                                className=\"block text-sm font-medium text-slate-700\"\r\n                            >\r\n                                Senha\r\n                            </label>\r\n                        </div>\r\n                        <input\r\n                            id=\"password\"\r\n                            name=\"password\"\r\n                            type=\"password\"\r\n                            required\r\n                            className=\"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\r\n                        />\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <div className=\"rounded-lg bg-red-50 p-3\">\r\n                            <p className=\"text-sm font-medium text-red-600\">{error}</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={pending}\r\n                        className=\"flex w-full items-center justify-center rounded-lg bg-indigo-600 px-4 py-2.5 text-sm font-semibold text-white transition-all hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    >\r\n                        {pending ? (\r\n                            <>\r\n                                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                                Validando...\r\n                            </>\r\n                        ) : (\r\n                            'Entrar no Portal'\r\n                        )}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n\r\n            <div className=\"bg-slate-50 p-4 text-center border-t border-slate-100 space-y-2\">\r\n                <p className=\"text-xs text-slate-500\">\r\n                    Problemas com o acesso? Procure a orientação educacional.\r\n                </p>\r\n                <Link href=\"/demo-setup\" className=\"block text-[10px] font-black text-indigo-400 hover:text-indigo-600 uppercase tracking-widest transition-colors\">\r\n                    Configuração de Demo (Primeiro Acesso)\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wQAAQ,EAAgB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wQAAQ,EAAC;IAEvC,eAAe,aAAa,QAAkB;QAC1C,WAAW;QACX,SAAS;QACT,MAAM,SAAS,MAAM,IAAA,gOAAK,EAAC;QAC3B,IAAI,QAAQ,OAAO;YACf,SAAS,OAAO,KAAK;YACrB,WAAW;QACf;IACJ;IAEA,qBACI,qSAAC;QAAI,WAAU;;0BACX,qSAAC;gBAAI,WAAU;;kCACX,qSAAC;wBAAI,WAAU;;0CACX,qSAAC;gCAAI,WAAU;0CACX,cAAA,qSAAC;oCACG,WAAU;oCACV,MAAK;oCACL,QAAO;oCACP,SAAQ;oCACR,OAAM;8CAEN,cAAA,qSAAC;wCACG,eAAc;wCACd,gBAAe;wCACf,aAAa;wCACb,GAAE;;;;;;;;;;;;;;;;0CAId,qSAAC;gCAAG,WAAU;0CAAoC;;;;;;0CAClD,qSAAC;gCAAE,WAAU;0CAA8B;;;;;;;;;;;;kCAG/C,qSAAC;wBAAK,QAAQ;wBAAc,WAAU;;0CAClC,qSAAC;;kDACG,qSAAC;wCACG,SAAQ;wCACR,WAAU;kDACb;;;;;;kDAGD,qSAAC;wCACG,IAAG;wCACH,MAAK;wCACL,MAAK;wCACL,aAAY;wCACZ,QAAQ;wCACR,WAAU;;;;;;;;;;;;0CAIlB,qSAAC;;kDACG,qSAAC;wCAAI,WAAU;kDACX,cAAA,qSAAC;4CACG,SAAQ;4CACR,WAAU;sDACb;;;;;;;;;;;kDAIL,qSAAC;wCACG,IAAG;wCACH,MAAK;wCACL,MAAK;wCACL,QAAQ;wCACR,WAAU;;;;;;;;;;;;4BAIjB,uBACG,qSAAC;gCAAI,WAAU;0CACX,cAAA,qSAAC;oCAAE,WAAU;8CAAoC;;;;;;;;;;;0CAIzD,qSAAC;gCACG,MAAK;gCACL,UAAU;gCACV,WAAU;0CAET,wBACG;;sDACI,qSAAC,mRAAO;4CAAC,WAAU;;;;;;wCAA8B;;mDAIrD;;;;;;;;;;;;;;;;;;0BAMhB,qSAAC;gBAAI,WAAU;;kCACX,qSAAC;wBAAE,WAAU;kCAAyB;;;;;;kCAGtC,qSAAC,8NAAI;wBAAC,MAAK;wBAAc,WAAU;kCAAiH;;;;;;;;;;;;;;;;;;AAMpK"}}]
}