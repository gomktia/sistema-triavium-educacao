{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yoda/Downloads/Sistema%20de%20Gest%C3%A3o%20Socioemocional/src/core/types/index.ts"],"sourcesContent":["// ============================================================\n// TIPOS DO DOMÍNIO - Sistema de Gestão Socioemocional\n// ============================================================\n\n// --- Enums ---\n\nexport enum GradeLevel {\n  PRIMEIRO_ANO = 'ANO_1_EM',\n  SEGUNDO_ANO = 'ANO_2_EM',\n  TERCEIRO_ANO = 'ANO_3_EM',\n}\n\nexport enum RiskTier {\n  TIER_1 = 'TIER_1', // Verde - Baixo Risco - Camada Universal\n  TIER_2 = 'TIER_2', // Amarelo - Risco Moderado - Camada Focalizada\n  TIER_3 = 'TIER_3', // Vermelho - Alto Risco - Camada Intensiva\n}\n\nexport enum RiskColor {\n  GREEN = 'GREEN',\n  YELLOW = 'YELLOW',\n  RED = 'RED',\n}\n\nexport enum RiskDomain {\n  EXTERNALIZING = 'EXTERNALIZING',\n  INTERNALIZING = 'INTERNALIZING',\n}\n\nexport enum UserRole {\n  ADMIN = 'ADMIN',           // Administrador do sistema (SaaS)\n  MANAGER = 'MANAGER',       // Gestor escolar\n  PSYCHOLOGIST = 'PSYCHOLOGIST', // Psicólogo escolar\n  COUNSELOR = 'COUNSELOR',   // Orientador educacional\n  TEACHER = 'TEACHER',       // Professor\n  STUDENT = 'STUDENT',       // Aluno\n}\n\nexport enum ScreeningWindow {\n  DIAGNOSTIC = 'DIAGNOSTIC',     // Março - 30-45 dias após início\n  MONITORING = 'MONITORING',     // Junho/Julho - Final do 1º semestre\n  FINAL = 'FINAL',               // Outubro - Meio do 2º semestre\n}\n\n// --- VIA Character Strengths ---\n\nexport enum VirtueCategory {\n  SABEDORIA = 'SABEDORIA',\n  CORAGEM = 'CORAGEM',\n  HUMANIDADE = 'HUMANIDADE',\n  JUSTICA = 'JUSTICA',\n  MODERACAO = 'MODERACAO',\n  TRANSCENDENCIA = 'TRANSCENDENCIA',\n}\n\nexport enum CharacterStrength {\n  CRIATIVIDADE = 'CRIATIVIDADE',\n  CURIOSIDADE = 'CURIOSIDADE',\n  PENSAMENTO_CRITICO = 'PENSAMENTO_CRITICO',\n  AMOR_APRENDIZADO = 'AMOR_APRENDIZADO',\n  SENSATEZ = 'SENSATEZ',\n  BRAVURA = 'BRAVURA',\n  PERSEVERANCA = 'PERSEVERANCA',\n  AUTENTICIDADE = 'AUTENTICIDADE',\n  VITALIDADE = 'VITALIDADE',\n  AMOR = 'AMOR',\n  BONDADE = 'BONDADE',\n  INTELIGENCIA_SOCIAL = 'INTELIGENCIA_SOCIAL',\n  CIDADANIA = 'CIDADANIA',\n  IMPARCIALIDADE = 'IMPARCIALIDADE',\n  LIDERANCA = 'LIDERANCA',\n  PERDAO = 'PERDAO',\n  MODESTIA = 'MODESTIA',\n  PRUDENCIA = 'PRUDENCIA',\n  AUTORREGULACAO = 'AUTORREGULACAO',\n  APRECIACAO_BELO = 'APRECIACAO_BELO',\n  GRATIDAO = 'GRATIDAO',\n  HUMOR = 'HUMOR',\n  ESPERANCA = 'ESPERANCA',\n  ESPIRITUALIDADE = 'ESPIRITUALIDADE',\n}\n\n// --- Interfaces ---\n\n/** Respostas brutas do questionário VIA (71 itens, escala 0-4) */\nexport interface VIARawAnswers {\n  /** Chave: número do item (1-71), Valor: resposta (0-4) */\n  [itemNumber: number]: number;\n}\n\n/** Respostas brutas do SRSS-IE (12 itens, escala 0-3) */\nexport interface SRSSRawAnswers {\n  /** Chave: número do item (1-12), Valor: resposta (0-3) */\n  [itemNumber: number]: number;\n}\n\nexport interface StrengthScore {\n  strength: CharacterStrength;\n  virtue: VirtueCategory;\n  label: string;\n  items: number[];\n  rawSum: number;\n  maxPossible: number;\n  /** Score normalizado 0-100 para comparação entre forças com nº diferente de itens */\n  normalizedScore: number;\n}\n\nexport interface RiskSubscaleResult {\n  domain: RiskDomain;\n  score: number;\n  maxPossible: number;\n  tier: RiskTier;\n  color: RiskColor;\n  label: string;\n}\n\nexport interface GradeSpecificAlert {\n  itemNumber: number;\n  itemLabel: string;\n  score: number;\n  severity: 'WATCH' | 'CRITICAL';\n  rationale: string;\n}\n\nexport interface InterventionSuggestion {\n  targetRisk: string;\n  leverageStrength: CharacterStrength;\n  strengthLabel: string;\n  strategy: string;\n  rationale: string;\n}\n\nexport interface StudentProfile {\n  // Risco (SRSS-IE)\n  externalizing: RiskSubscaleResult;\n  internalizing: RiskSubscaleResult;\n  overallTier: RiskTier;\n  overallColor: RiskColor;\n\n  // Forças (VIA)\n  allStrengths: StrengthScore[];\n  signatureStrengths: StrengthScore[]; // Top 5\n  developmentAreas: StrengthScore[];   // Bottom 5\n\n  // Cruzamento Preditivo\n  gradeAlerts: GradeSpecificAlert[];\n  interventionSuggestions: InterventionSuggestion[];\n}\n"],"names":[],"mappings":"AAAA,+DAA+D;AAC/D,sDAAsD;AACtD,+DAA+D;AAE/D,gBAAgB;;;;;;;;;;;;;;;;;;;AAET,IAAA,AAAK,oCAAA;;;;WAAA;;AAML,IAAA,AAAK,kCAAA;;;;WAAA;;AAML,IAAA,AAAK,mCAAA;;;;WAAA;;AAML,IAAA,AAAK,oCAAA;;;WAAA;;AAKL,IAAA,AAAK,kCAAA;;;;;;;WAAA;;AASL,IAAA,AAAK,yCAAA;;;;WAAA;;AAQL,IAAA,AAAK,wCAAA;;;;;;;WAAA;;AASL,IAAA,AAAK,2CAAA;;;;;;;;;;;;;;;;;;;;;;;;;WAAA"}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yoda/Downloads/Sistema%20de%20Gest%C3%A3o%20Socioemocional/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,6NAAO,EAAC,IAAA,oMAAI,EAAC;AACtB"}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yoda/Downloads/Sistema%20de%20Gest%C3%A3o%20Socioemocional/components/domain/TierBadge.tsx"],"sourcesContent":["import { cn } from '@/lib/utils';\r\n\r\nexport enum RiskTier {\r\n    TIER_1 = 'TIER_1',\r\n    TIER_2 = 'TIER_2',\r\n    TIER_3 = 'TIER_3',\r\n}\r\n\r\nconst TIER_CONFIG = {\r\n    [RiskTier.TIER_1]: {\r\n        label: 'Rastro Verde (Universal)',\r\n        color: 'bg-emerald-50 text-emerald-700 border-emerald-200',\r\n        dot: 'bg-emerald-500'\r\n    },\r\n    [RiskTier.TIER_2]: {\r\n        label: 'Rastro Amarelo (Focalizado)',\r\n        color: 'bg-amber-50 text-amber-700 border-amber-200',\r\n        dot: 'bg-amber-500'\r\n    },\r\n    [RiskTier.TIER_3]: {\r\n        label: 'Rastro Vermelho (Intensivo)',\r\n        color: 'bg-rose-50 text-rose-700 border-rose-200',\r\n        dot: 'bg-rose-500'\r\n    },\r\n} as const;\r\n\r\ninterface TierBadgeProps {\r\n    tier: string;\r\n    showLabel?: boolean;\r\n    className?: string;\r\n}\r\n\r\nexport function TierBadge({ tier, showLabel = true, className }: TierBadgeProps) {\r\n    const config = TIER_CONFIG[tier as RiskTier] || TIER_CONFIG[RiskTier.TIER_1];\r\n\r\n    return (\r\n        <div className={cn(\r\n            'inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full border text-[10px] font-bold uppercase tracking-wider',\r\n            config.color,\r\n            className\r\n        )}>\r\n            <span className={cn('h-1.5 w-1.5 rounded-full', config.dot)} />\r\n            {showLabel ? config.label : tier}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;;;AAEO,IAAA,AAAK,kCAAA;;;;WAAA;;AAMZ,MAAM,cAAc;IAChB,UAAiB,EAAE;QACf,OAAO;QACP,OAAO;QACP,KAAK;IACT;IACA,UAAiB,EAAE;QACf,OAAO;QACP,OAAO;QACP,KAAK;IACT;IACA,UAAiB,EAAE;QACf,OAAO;QACP,OAAO;QACP,KAAK;IACT;AACJ;AAQO,SAAS,UAAU,EAAE,IAAI,EAAE,YAAY,IAAI,EAAE,SAAS,EAAkB;IAC3E,MAAM,SAAS,WAAW,CAAC,KAAiB,IAAI,WAAW,UAAiB;IAE5E,qBACI,qSAAC;QAAI,WAAW,IAAA,yKAAE,EACd,mHACA,OAAO,KAAK,EACZ;;0BAEA,qSAAC;gBAAK,WAAW,IAAA,yKAAE,EAAC,4BAA4B,OAAO,GAAG;;;;;;YACzD,YAAY,OAAO,KAAK,GAAG;;;;;;;AAGxC"}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yoda/Downloads/Sistema%20de%20Gest%C3%A3o%20Socioemocional/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,qSAAC;QACC,aAAU;QACV,WAAW,IAAA,yKAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qSAAC;QACC,aAAU;QACV,WAAW,IAAA,yKAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,qSAAC;QACC,aAAU;QACV,WAAW,IAAA,yKAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,qSAAC;QACC,aAAU;QACV,WAAW,IAAA,yKAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qSAAC;QACC,aAAU;QACV,WAAW,IAAA,yKAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,qSAAC;QACC,aAAU;QACV,WAAW,IAAA,yKAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qSAAC;QACC,aAAU;QACV,WAAW,IAAA,yKAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yoda/Downloads/Sistema%20de%20Gest%C3%A3o%20Socioemocional/app/%28portal%29/alunos/page.tsx"],"sourcesContent":["import { redirect } from 'next/navigation';\r\nimport { getCurrentUser } from '@/lib/auth';\r\nimport { UserRole } from '@/src/core/types';\r\nimport { createClient } from '@/lib/supabase/server';\r\nimport { TierBadge } from '@/components/domain/TierBadge';\r\nimport Link from 'next/link';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { UserSearch, ChevronRight, Filter } from 'lucide-react';\r\n\r\nexport const metadata = {\r\n    title: 'Gestão de Alunos',\r\n};\r\n\r\nexport default async function AlunosPage() {\r\n    const user = await getCurrentUser();\r\n    const allowedRoles = [UserRole.PSYCHOLOGIST, UserRole.COUNSELOR, UserRole.MANAGER, UserRole.ADMIN];\r\n\r\n    if (!user || !allowedRoles.includes(user.role)) {\r\n        redirect('/');\r\n    }\r\n\r\n    const supabase = await createClient();\r\n\r\n    const { data: students } = await supabase\r\n        .from('students')\r\n        .select('id, name, grade')\r\n        .eq('tenantId', user.tenantId)\r\n        .eq('isActive', true)\r\n        .order('name');\r\n\r\n    const { data: assessments } = await supabase\r\n        .from('assessments')\r\n        .select('studentId, overallTier')\r\n        .eq('tenantId', user.tenantId)\r\n        .eq('type', 'SRSS_IE')\r\n        .eq('academicYear', new Date().getFullYear());\r\n\r\n    const tierMap = new Map((assessments || []).map(a => [a.studentId, a.overallTier]));\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-black text-slate-900 tracking-tight\">Gestão de Alunos</h1>\r\n                    <p className=\"text-slate-500 mt-1\">Monitore o risco socioemocional e planeje intervenções.</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid gap-3\">\r\n                {students?.map((student) => {\r\n                    const tier = tierMap.get(student.id);\r\n                    return (\r\n                        <Link key={student.id} href={`/alunos/${student.id}`}>\r\n                            <Card className=\"hover:border-indigo-300 hover:shadow-md transition-all group\">\r\n                                <CardContent className=\"p-4 flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <div className=\"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-400\">\r\n                                            <UserSearch size={20} />\r\n                                        </div>\r\n                                        <div>\r\n                                            <h4 className=\"font-bold text-slate-800 group-hover:text-indigo-600 transition-colors\">{student.name}</h4>\r\n                                            <p className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest\">{student.grade}</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        {tier ? (\r\n                                            <TierBadge tier={tier} />\r\n                                        ) : (\r\n                                            <span className=\"text-[10px] font-black text-slate-300 uppercase tracking-tighter\">Pendente</span>\r\n                                        )}\r\n                                        <ChevronRight className=\"text-slate-300 group-hover:text-indigo-400 transition-colors\" size={20} />\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;;AAEO,MAAM,WAAW;IACpB,OAAO;AACX;AAEe,eAAe;IAC1B,MAAM,OAAO,MAAM,IAAA,oLAAc;IACjC,MAAM,eAAe;QAAC,gMAAQ,CAAC,YAAY;QAAE,gMAAQ,CAAC,SAAS;QAAE,gMAAQ,CAAC,OAAO;QAAE,gMAAQ,CAAC,KAAK;KAAC;IAElG,IAAI,CAAC,QAAQ,CAAC,aAAa,QAAQ,CAAC,KAAK,IAAI,GAAG;QAC5C,IAAA,wPAAQ,EAAC;IACb;IAEA,MAAM,WAAW,MAAM,IAAA,gMAAY;IAEnC,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,SAC5B,IAAI,CAAC,YACL,MAAM,CAAC,mBACP,EAAE,CAAC,YAAY,KAAK,QAAQ,EAC5B,EAAE,CAAC,YAAY,MACf,KAAK,CAAC;IAEX,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,SAC/B,IAAI,CAAC,eACL,MAAM,CAAC,0BACP,EAAE,CAAC,YAAY,KAAK,QAAQ,EAC5B,EAAE,CAAC,QAAQ,WACX,EAAE,CAAC,gBAAgB,IAAI,OAAO,WAAW;IAE9C,MAAM,UAAU,IAAI,IAAI,CAAC,eAAe,EAAE,EAAE,GAAG,CAAC,CAAA,IAAK;YAAC,EAAE,SAAS;YAAE,EAAE,WAAW;SAAC;IAEjF,qBACI,qSAAC;QAAI,WAAU;;0BACX,qSAAC;gBAAI,WAAU;0BACX,cAAA,qSAAC;;sCACG,qSAAC;4BAAG,WAAU;sCAAoD;;;;;;sCAClE,qSAAC;4BAAE,WAAU;sCAAsB;;;;;;;;;;;;;;;;;0BAI3C,qSAAC;gBAAI,WAAU;0BACV,UAAU,IAAI,CAAC;oBACZ,MAAM,OAAO,QAAQ,GAAG,CAAC,QAAQ,EAAE;oBACnC,qBACI,qSAAC,iPAAI;wBAAkB,MAAM,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE;kCAChD,cAAA,qSAAC,wLAAI;4BAAC,WAAU;sCACZ,cAAA,qSAAC,+LAAW;gCAAC,WAAU;;kDACnB,qSAAC;wCAAI,WAAU;;0DACX,qSAAC;gDAAI,WAAU;0DACX,cAAA,qSAAC,uRAAU;oDAAC,MAAM;;;;;;;;;;;0DAEtB,qSAAC;;kEACG,qSAAC;wDAAG,WAAU;kEAA0E,QAAQ,IAAI;;;;;;kEACpG,qSAAC;wDAAE,WAAU;kEAAkE,QAAQ,KAAK;;;;;;;;;;;;;;;;;;kDAIpG,qSAAC;wCAAI,WAAU;;4CACV,qBACG,qSAAC,sMAAS;gDAAC,MAAM;;;;;qEAEjB,qSAAC;gDAAK,WAAU;0DAAmE;;;;;;0DAEvF,qSAAC,6RAAY;gDAAC,WAAU;gDAA+D,MAAM;;;;;;;;;;;;;;;;;;;;;;;uBAnBlG,QAAQ,EAAE;;;;;gBAyB7B;;;;;;;;;;;;AAIhB"}}]
}